<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Alessio's Portofolio</title>
        <style>
            * {
                padding: 0px;
                margin: 0px;
            }
        </style>
    </head>
    <body>
        <script>
            let worldSize = 800;
            let defaultPlayerSize = 75;
            let x = worldSize / 2;
            let y = worldSize / 2;

            class Player {
                constructor(posX, posY, size, main) {
                    this.size = size
                    this.posX = posX - this.size / 2;
                    this.posY = posY - this.size / 2;
                    this.moveX = 0
                    this.moveY =0
                    this.dx = 2;
                    this.dy =2
                    this.ctx = main.getContext("2d");
                    this.ctx.fillStyle = "blue";
                    this.interval=null

                    this.up = false;
                    this.left = false;
                    this.right = false;
                    this.down = false;

                    document.onkeydown = function (event) {
                        if (event.keyCode === 87) {
                            // this.up = true;
                            // console.log("UP");
                            this.moveY = 1
                        }
                        if (event.keyCode === 65) {
                            // this.left = true;
                            this.moveX = -1

                        }
                        if (event.keyCode === 86) {
                            // this.right = true;
                            this.moveX = 1
                        }
                        if (event.keyCode === 83) {
                            // this.down = true;
                            this.moveY = -1
                        }
                    };

                    document.onkeyup = function (event) {
                        if (event.keyCode === 87) {
                            // this.up = false;
                            this.moveY = 0
                            console.log("UP");
                        }
                        if (event.keyCode === 65) {
                            this.left = false;
                            this.moveX = 0

                        }
                        if (event.keyCode === 86) {
                            // this.right = false;
                            this.moveX = 0

                        }
                        if (event.keyCode === 83) {
                            this.down = false;
                            this.moveY = 0

                        }
                    };
                    clearInterval(this.interval);
                    // this.interval = setInterval(this.render, 200)
                }


                place() {
                    this.ctx.fillRect(this.posX, this.posY, this.size, this.size);
                }
                place(a, b, c, d) {
                    this.ctx.fillRect(a, b,c,d)
                }

                remove() {
                    this.ctx.clearRect(this.posX-1, this.posY-1, this.size + 1, this.size + 1);
                }
                
                render() {
                    if (this.up) {
                        this.y += this.dy
                    }
                    if (this.left) {
                        this.x -= this.dx;
                    }
                    if (this.right) {
                        this.x += this.dx;
                    }
                    if (this.down) {
                        this.y -= this.dy;
                    }
                    this.remove()
                    this.place()
                    // this.render();
                }
            }

            var main = document.createElement("canvas");
            main.width = worldSize;
            main.height = worldSize;
            main.style.cssText = `
                display: block;
                background-color: #eee;
                overflow: hidden;`;
            main.id = "myCanvas";
            document.querySelector("body").append(main);

            var mc = new Player(x, y, defaultPlayerSize, main);
            mc.render();

            // var ctx = main.getContext("2d");
            // ctx.fillStyle = "blue";
            // ctx.fillRect(x, y, pSize, pSize);

            // function renderPlayer() {
            //     ctx.beginPath();
            //     ctx.rect(x, y, pSize, pSize);
            //     ctx.fillStyle = "#0095DD";
            //     ctx.fill();
            //     ctx.closePath();
            //     setTimeout(() => {
            //         refreshPlayer();
            //     }, 16);
            // }

            // function refreshPlayer(direction) {
            //     ctx.clearRect(x - 1, y - 1, x + pSize + 1, y + pSize + 1);
            //     x += dx;
            //     y += dy;
            //     renderPlayer();
            // }

            // var ctx2 = main.getContext("2d");
            // ctx2.fillStyle = "#0095DD";
            // ctx2.fillRect(x2, y2, pSize, pSize);
            // function renderPlayer2() {

            // ctx2.fillRect(x2, y2, pSize, pSize);
            //     setTimeout(() => {
            //         refreshPlayer2();
            //     }, 16);
            // }
            // // function refreshPlayer2() {
            // //     ctx2.clearRect(x2 - 1, y2 - 1, x2 + pSize + 1, y2 + pSize + 1);
            // //     x2 += dx2;
            // //     y2 += dy2;
            // //     renderPlayer2();
            // // }

            main.onclick = function (e) {
                // calculatePos();
                // renderPlayer();
                // renderPlayer2();
                mc.place(e.x - mc.size / 2, e.y - mc.size / 2, mc.size, mc.size);
                // document.documentElement.scrollLeft += 30;
                // console.log("scroll location:", window.scrollX, window.scrollY);
                console.log("mouse location:", e.x, e.y);
                mc.remove()

            };
            // function scroll(x, y) {
            //     window.scrollTo(x, y);
            // }

            // function calculatePos() {
            //     console.log(x);
            // }
            // document.addEventListener("keydown", (event) => {
            //     console.log(event)
            // });
        </script>
    </body>
</html>
